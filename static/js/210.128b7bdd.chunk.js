"use strict";(self.webpackChunkread_journey_project=self.webpackChunkread_journey_project||[]).push([[210],{3471:function(e,n,r){r.r(n),r.d(n,{default:function(){return N}});var t=r(2791),a=r(4420),s=r(7689),i=r(8332),o=function(e){return e.reading.readingBook},c=function(e){return e.reading.isLoading},u=function(e){return e.reading.isWhileReading},l=r(1809),d={},h=r(6659),x=r(3329),p=function(e){var n=e.book,r=(0,a.v9)(u),t=n.imageUrl,s=n.title,i=n.author;return(0,x.jsxs)("section",{children:[(0,x.jsx)("h2",{children:"My reading"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("img",{src:t||h.ed,alt:s}),(0,x.jsx)("h3",{children:s}),(0,x.jsx)("p",{children:i})]}),r?(0,x.jsx)("span",{className:d.indicatorStop,children:"STOP"}):(0,x.jsx)("span",{className:d.indicatorStart,children:"START"})]})},j=function(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h3",{children:"Progress"}),(0,x.jsx)("p",{children:"Here you will see when and how much you read. To record, click on the button above."}),(0,x.jsx)("p",{children:"\ud83c\udf1f"})]})},g=r(1413),m=r(5861),f=r(9439),v=r(7757),b=r.n(v),k={},S=r(1134),y=r(4695),F=r(8007),T=function(e){var n,r=e.book,s=(0,t.useState)(!0),o=(0,f.Z)(s,2),c=o[0],u=o[1],l=r._id,d=r.totalPages,h=r.progress,p=(0,a.I0)(),j=h.map((function(e){return e.status})).some((function(e){return"active"===e})),v=(0,t.useState)(j),T=(0,f.Z)(v,2),_=T[0],w=T[1],C=c?j:_,I=F.Ry({page:F.Rx().required("Enter page number").typeError("Hmm... I think this is not a number :)").min(1).max("".concat(d))}),N=(0,S.cI)({mode:"onChange",resolver:(0,y.X)(I)}),P=N.register,D=N.handleSubmit,R=N.formState,Z=R.errors,L=R.isValid,E=N.reset,B=function(){var e=(0,m.Z)(b().mark((function e(n){var r,t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.page,t={id:l,page:r},e.prev=2,!C){e.next=9;break}return e.next=6,p((0,i.GE)(t));case 6:w(!1),e.next=12;break;case 9:return e.next=11,p((0,i.m2)(t));case 11:w(!0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:return e.prev=17,u(!1),E(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,21]])})));return function(n){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[C?(0,x.jsx)("p",{children:"Stop page:"}):(0,x.jsx)("p",{children:"Start page:"}),(0,x.jsxs)("form",{onSubmit:D(B),autoComplete:"off",className:k.libraryForm,children:[(0,x.jsx)("label",{htmlFor:"page",children:"Page number:"}),(0,x.jsx)("input",(0,g.Z)({type:"text",name:"page",id:"page"},P("page"))),(0,x.jsx)("p",{children:null===(n=Z.page)||void 0===n?void 0:n.message}),(0,x.jsx)("button",{disabled:!L,className:k.formBtn,children:C?"To stop":"To start"})]})]})},_={active:"Details_active__juBcP"},w=function(e){var n=e.book.progress;return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("ul",{children:n.map((function(e){e.startPage,e.finishPage,e.startReading,e.finishReading;var n=e._id;e.speed,e.status;return(0,x.jsx)("li",{},n)}))})})},C=function(){return(0,x.jsx)(x.Fragment,{children:"STATISTICS"})},I=function(e){var n=e.book,r=(0,t.useState)("Diary"),a=(0,f.Z)(r,2),s=a[0],i=a[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:_.navigationLinks,children:[(0,x.jsx)("button",{onClick:function(){return i("Diary")},className:"".concat(_.navLink," ").concat("Diary"===s&&_.active),children:"Diary"}),(0,x.jsx)("button",{onClick:function(){return i("Statistics")},className:"".concat(_.navLink," ").concat("Statistics"===s&&_.active),children:"Statistics"})]}),"Diary"===s&&(0,x.jsx)(w,{book:n}),"Statistics"===s&&(0,x.jsx)(C,{})]})},N=function(){var e,n=null===(e=(0,s.TH)().state)||void 0===e?void 0:e.bookId,r=(0,a.v9)(o);console.log("book: ",r);var u=(0,a.v9)(c),d=(0,a.I0)();return(0,t.useEffect)((function(){d((0,i.OY)(n))}),[d,n]),n?(0,x.jsxs)(x.Fragment,{children:[u&&(0,x.jsx)("p",{children:"Loading..."}),r&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(l.Z,{children:[(0,x.jsx)(T,{book:r}),"unread"===r.status?(0,x.jsx)(j,{}):(0,x.jsx)(I,{book:r})]}),(0,x.jsx)(p,{book:r})]})]}):(0,x.jsx)(s.Fg,{to:"/library"})}}}]);
//# sourceMappingURL=210.128b7bdd.chunk.js.map