"use strict";(self.webpackChunkread_journey_project=self.webpackChunkread_journey_project||[]).push([[886],{4472:function(e,a,r){r.r(a),r.d(a,{default:function(){return se}});var s="ReadingPage_readingPageWrapper__v6iag",i=r(2791),t=r(4420),n=r(7689),c=r(8332),o=function(e){return e.reading.readingBook},d=function(e){return e.reading.isLoading},l=function(e){return e.reading.isWhileReading},_=r(1809),g="MyBook_myBookSction__tYIsb",p="MyBook_titleWrapper__MhOFj",u="MyBook_readingTime__OQ4Nk",h="MyBook_bookWrapper__gz46v",m="MyBook_statusSvg__aBDWL",x=r(4596),j=r(6042),v=r(3329),f=function(e){var a=e.book,r=(0,t.v9)(l),s=a.imageUrl,i=a.title,n=a.author,c=a.timeLeftToRead,o=null===c||void 0===c?void 0:c.hours,d=null===c||void 0===c?void 0:c.minutes;return(0,v.jsxs)("section",{className:g,children:[(0,v.jsxs)("div",{className:p,children:[(0,v.jsx)("h2",{children:"My reading"}),c&&(0,v.jsxs)("p",{className:u,children:[o," hours and ",d," minutes left"]})]}),(0,v.jsxs)("div",{className:h,children:[(0,v.jsx)("img",{src:s||j.ed,alt:i}),(0,v.jsx)("h3",{children:i}),(0,v.jsx)("p",{children:n})]}),r?(0,v.jsx)("svg",{className:m,"aria-label":"stop icon",children:(0,v.jsx)("use",{href:x.Z+"#icon-stop"})}):(0,v.jsx)("svg",{className:m,"aria-label":"start icon",children:(0,v.jsx)("use",{href:x.Z+"#icon-start"})})]})},y="Progress_progressSection__4btKy",b="Progress_imageWrapper__oM5ug",N="Progress_starImage__gnxPj",k=function(){return(0,v.jsxs)("section",{className:y,children:[(0,v.jsx)("h3",{children:"Progress"}),(0,v.jsx)("p",{children:"Here you will see when and how much you read. To record, click on the button above."}),(0,v.jsx)("div",{className:b,children:(0,v.jsx)("img",{src:j.Dd,alt:"star",className:N})})]})},D=r(1413),I=r(5861),S=r(9439),B=r(4687),R=r.n(B),F={formTitile:"AddReadingForm_formTitile__aT8iT",readingForm:"AddReadingForm_readingForm__Oub4O",inputWrapper:"AddReadingForm_inputWrapper__H-ZNz",pageInput:"AddReadingForm_pageInput__eIV8F",error:"AddReadingForm_error__bjRbB",correct:"AddReadingForm_correct__G0Go3",errorMessage:"AddReadingForm_errorMessage__o-64B",correctMessage:"AddReadingForm_correctMessage__8kdVp",formBtn:"AddReadingForm_formBtn__rQqnR",bookIsReadBox:"AddReadingForm_bookIsReadBox__eOZlc",booksImg:"AddReadingForm_booksImg__O47ui",description:"AddReadingForm_description__QF1Z8",formBnt:"AddReadingForm_formBnt__OPDSz"},P=r(1134),w=r(4695),W=r(8007),Z=r(3978),L=function(e){var a,r=e.book,s=(0,i.useState)(!0),n=(0,S.Z)(s,2),o=n[0],d=n[1],l=r._id,_=r.totalPages,g=r.progress,p=(0,t.I0)(),u=(0,i.useState)(!1),h=(0,S.Z)(u,2),m=h[0],x=h[1],f=g.map((function(e){return e.status})).some((function(e){return"active"===e})),y=(0,i.useState)(f),b=(0,S.Z)(y,2),N=b[0],k=b[1],B=o?f:N,L=W.Ry({page:W.Rx().required("Enter page number").typeError("Hmm... I think this is not a number :)").min(1).max("".concat(_))}),T=(0,P.cI)({mode:"onChange",resolver:(0,w.X)(L)}),M=T.register,A=T.handleSubmit,O=T.formState,C=O.errors,H=O.isValid,z=O.dirtyFields,U=T.reset,V=function(){var e=(0,I.Z)(R().mark((function e(a){var r,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.page,s={id:l,page:r},e.prev=2,!B){e.next=10;break}return e.next=6,p((0,c.GE)(s));case 6:k(!1),r===_&&x(!0),e.next=13;break;case 10:return e.next=12,p((0,c.m2)(s));case 12:k(!0);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.error(e.t0);case 18:return e.prev=18,d(!1),U(),e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[2,15,18,22]])})));return function(a){return e.apply(this,arguments)}}();return(0,v.jsxs)("section",{className:F.readingFormSection,children:[B?(0,v.jsx)("p",{className:F.formTitile,children:"Stop page:"}):(0,v.jsx)("p",{className:F.formTitile,children:"Start page:"}),(0,v.jsxs)("form",{onSubmit:A(V),autoComplete:"off",className:F.readingForm,children:[(0,v.jsxs)("div",{className:F.inputWrapper,children:[(0,v.jsx)("label",{htmlFor:"page",children:"Page number:"}),(0,v.jsx)("input",(0,D.Z)((0,D.Z)({type:"text",name:"page",id:"page"},M("page")),{},{className:"".concat(F.pageInput," ").concat(C.page&&F.error," \n            ").concat(z.page&&!C.page&&F.correct)})),(null===C||void 0===C?void 0:C.page)&&(0,v.jsx)("p",{className:F.errorMessage,children:null===(a=C.page)||void 0===a?void 0:a.message}),z.page&&!C.page&&(0,v.jsx)("p",{className:F.correctMessage,children:"Correct"})]}),(0,v.jsx)("button",{disabled:!H,className:F.formBtn,children:B?"To stop":"To start"})]}),m&&(0,v.jsx)(Z.Z,{isOpen:m,closeFnc:function(){x(!1)},children:(0,v.jsxs)("div",{className:F.bookIsReadBox,children:[(0,v.jsx)("img",{src:j.PN,alt:"books",className:F.booksImg}),(0,v.jsx)("h3",{children:"The book is read"}),(0,v.jsxs)("p",{className:F.description,children:["It was an ",(0,v.jsx)("span",{children:"exciting journey"}),", where each page revealed new horizons, and the characters became inseparable friends."]})]})})]})},T="Details_detailsScetion__deWm+",M="Details_detailsBtnWrapper__2IVfF",A="Details_detailsBtnSvg__LyszN",O="Details_detailsBtn__wTnVd",C="Details_active__juBcP",H=r(3433),z={diary:"Diary_diary__msjM1",dairyList:"Diary_dairyList__iHs6-",date:"Diary_date__zj2hD",dairyListItemSvg:"Diary_dairyListItemSvg__BpiHz",diaryItem:"Diary_diaryItem__pLnKA",diaryWrapper:"Diary_diaryWrapper__gj6eX",svgWrapper:"Diary_svgWrapper__TFIRO",diaryHeader:"Diary_diaryHeader__iUORi",diaryDate:"Diary_diaryDate__Bt+fl",pageRead:"Diary_pageRead__cxLNa",sprintList:"Diary_sprintList__a8z3U",sprintItem:"Diary_sprintItem__u-x1R",totalPercentage:"Diary_totalPercentage__vr0OI",minuteDifference:"Diary_minuteDifference__cXzGy",graphWrapper:"Diary_graphWrapper__DQanu",graphBox:"Diary_graphBox__4Icni",graphImg:"Diary_graphImg__Or0aY",speed:"Diary_speed__2Hdq4",deleteBtn:"Diary_deleteBtn__o2RjS",deleteSvg:"Diary_deleteSvg__Gn0J5"},U=function(e){var a=e.reduce((function(e,a){var r=function(e){var a=new Date(e),r=String(a.getUTCDate()).padStart(2,"0"),s=String(a.getUTCMonth()+1).padStart(2,"0"),i=a.getUTCFullYear();return"".concat(r,".").concat(s,".").concat(i)}(a.startReading);return e[r]?e[r].push(a):e[r]=[a],e}),{});return Object.entries(a).reverse()},V=function(e){var a=e.sprint,r=e.totalPages,s=e.bookId,i=(0,t.I0)(),n=new URLSearchParams({bookId:s,readingId:a._id});if(!a.finishPage)return null;var o=(100*(a.finishPage-a.startPage)/r).toFixed(2),d=function(e,a){var r=new Date(e),s=new Date(a)-r;return{minuteDifference:Math.floor(s/6e4)}}(a.startReading,a.finishReading).minuteDifference,l=a.speed;return(0,v.jsxs)("li",{className:z.sprintItem,children:[(0,v.jsxs)("div",{className:z.percentageBox,children:[(0,v.jsxs)("p",{className:z.totalPercentage,children:[o,"%"]}),(0,v.jsxs)("p",{className:z.minuteDifference,children:[d," ",1===d?"minute":"minutes"]})]}),(0,v.jsxs)("div",{className:z.graphWrapper,children:[(0,v.jsxs)("div",{className:z.graphBox,children:[(0,v.jsx)("img",{src:j.f9,alt:"grapf",className:z.graphImg}),(0,v.jsxs)("p",{className:z.speed,children:[l," ",1===l?"page":"pages"," per hour"]})]}),(0,v.jsx)("button",{type:"button",onClick:function(){return i((0,c.jF)(n))},className:z.deleteBtn,children:(0,v.jsx)("svg",{className:z.deleteSvg,"aria-label":"trash icon",children:(0,v.jsx)("use",{href:x.Z+"#icon-trash"})})})]})]})},E=function(e){var a=e.day,r=e.sprints,s=e.totalPages,i=e.bookId;if(1===r.length&&"active"===r[0].status)return null;console.log("sprints: ",r);var t=function(e,a){var r;if(0===e.length||1===e.length&&"active"===e[0].status)return 1;var s=null!==(r=e[e.length-1].finishPage)&&void 0!==r?r:e[e.length-2].finishPage;return s>a?a:s}(r,s);return(0,v.jsx)("li",{className:z.diaryItem,children:(0,v.jsxs)("div",{className:z.diaryWrapper,children:[(0,v.jsxs)("div",{className:z.diaryHeader,children:[(0,v.jsx)("div",{className:z.svgWrapper,children:(0,v.jsx)("svg",{className:z.dairyListItemSvg,"aria-label":"block icon",children:(0,v.jsx)("use",{href:x.Z+"#icon-block"})})}),(0,v.jsxs)("div",{className:z.diaryDate,children:[(0,v.jsx)("p",{className:z.date,children:a}),(0,v.jsxs)("p",{className:z.pageRead,children:[t," ",1===t?"page":"pages"]})]})]}),(0,v.jsx)("ul",{className:z.sprintList,children:(0,H.Z)(r).reverse().map((function(e){return(0,v.jsx)(V,{sprint:e,totalPages:s,bookId:i},e._id)}))})]})})},G=function(e){var a=e.book,r=a.totalPages,s=a.progress,i=U(s);return console.log("diaryList: ",i),(0,v.jsxs)("section",{className:z.diary,children:[(0,v.jsx)("h3",{children:"Diary"}),(0,v.jsx)("ul",{className:z.dairyList,children:i.map((function(e){var s=(0,S.Z)(e,2),i=s[0],t=s[1];return(0,v.jsx)(E,{day:i,sprints:t,totalPages:r,bookId:a._id},i)}))})]})},q="Statistics_statisticsBlok__DuJqf",Q="Statistics_statisticsDescr__Dysij",X="Statistics_chartWrapper__5odmb",Y="Statistics_chartBox__ZZV5w",J="Statistics_pie__-xJWB",K="Statistics_pieDescriptionBox__-VgHF",$="Statistics_colorBox__-yj1N",ee="Statistics_pieDescription__gXsxB",ae=function(e){var a=e.book,r=a.totalPages,s=function(e,a){var r,s=null!==(r=e[e.length-1].finishPage)&&void 0!==r?r:e[e.length-2].finishPage;return s>a?a:s}(a.progress,r),i=(100*s/r).toFixed(2);return(0,v.jsxs)("div",{className:q,children:[(0,v.jsx)("h3",{children:"Statistics"}),(0,v.jsx)("p",{className:Q,children:"Each page, each chapter is a new round of knowledge, a new step towards understanding. By rewriting statistics, we create our own reading history."}),(0,v.jsxs)("div",{className:X,children:[(0,v.jsx)("div",{className:Y,children:(0,v.jsx)("div",{className:J,style:{"--p":"".concat(i)},children:"100%"})}),(0,v.jsxs)("div",{className:K,children:[(0,v.jsx)("div",{className:$}),(0,v.jsxs)("div",{className:ee,children:[(0,v.jsxs)("span",{children:[i,"%"]}),(0,v.jsxs)("p",{children:[s," ",1!==s?"pages":"page"," read"]})]})]})]})]})},re=function(e){var a=e.book,r=(0,i.useState)("Diary"),s=(0,S.Z)(r,2),t=s[0],n=s[1];return(0,v.jsxs)("section",{className:T,children:[(0,v.jsxs)("div",{className:M,children:[(0,v.jsx)("button",{onClick:function(){return n("Diary")},className:"".concat(O," ").concat("Diary"===t&&C),children:(0,v.jsx)("svg",{"aria-label":"hourglass icon",className:A,children:(0,v.jsx)("use",{href:x.Z+"#icon-hourglass"})})}),(0,v.jsx)("button",{onClick:function(){return n("Statistics")},className:"".concat(O," ").concat("Statistics"===t&&C),children:(0,v.jsx)("svg",{"aria-label":"pie icon",className:A,children:(0,v.jsx)("use",{href:x.Z+"#icon-pie"})})})]}),"Diary"===t&&(0,v.jsx)(G,{book:a}),"Statistics"===t&&(0,v.jsx)(ae,{book:a})]})},se=function(){var e,a=null===(e=(0,n.TH)().state)||void 0===e?void 0:e.bookId,r=(0,t.v9)(o);console.log("book: ",r);var l=(0,t.v9)(d),g=(0,t.I0)();return(0,i.useEffect)((function(){g((0,c.OY)(a))}),[g,a]),a?(0,v.jsxs)(v.Fragment,{children:[l&&(0,v.jsx)("p",{children:"Loading..."}),r&&(0,v.jsxs)("div",{className:s,children:[(0,v.jsxs)(_.Z,{children:[(0,v.jsx)(L,{book:r}),"unread"===r.status?(0,v.jsx)(k,{}):(0,v.jsx)(re,{book:r})]}),(0,v.jsx)(f,{book:r})]})]}):(0,v.jsx)(n.Fg,{to:"/library"})}}}]);
//# sourceMappingURL=886.e0ee5acc.chunk.js.map