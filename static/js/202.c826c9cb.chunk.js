"use strict";(self.webpackChunkread_journey_project=self.webpackChunkread_journey_project||[]).push([[202],{3918:function(e,r,a){a.r(r),a.d(r,{default:function(){return W}});var n="ReadingPage_readingPageWrapper__v6iag",s=a(2791),t=a(4420),i=a(7689),o=a(8332),c=function(e){return e.reading.readingBook},d=function(e){return e.reading.isLoading},l=function(e){return e.reading.isWhileReading},u=a(1809),g="MyBook_myBookSction__tYIsb",m="MyBook_bookWrapper__gz46v",p="MyBook_statusSvg__aBDWL",_=a(4596),h=a(7766),x=a(3329),j=function(e){var r=e.book,a=(0,t.v9)(l),n=r.imageUrl,s=r.title,i=r.author;return(0,x.jsxs)("section",{className:g,children:[(0,x.jsx)("h2",{children:"My reading"}),(0,x.jsxs)("div",{className:m,children:[(0,x.jsx)("img",{src:n||h.ed,alt:s}),(0,x.jsx)("h3",{children:s}),(0,x.jsx)("p",{children:i})]}),a?(0,x.jsx)("svg",{className:p,"aria-label":"stop icon",children:(0,x.jsx)("use",{href:_.Z+"#icon-stop"})}):(0,x.jsx)("svg",{className:p,"aria-label":"start icon",children:(0,x.jsx)("use",{href:_.Z+"#icon-start"})})]})},f="Progress_progressSection__4btKy",v="Progress_imageWrapper__oM5ug",b="Progress_starImage__gnxPj",k=function(){return(0,x.jsxs)("section",{className:f,children:[(0,x.jsx)("h3",{children:"Progress"}),(0,x.jsx)("p",{children:"Here you will see when and how much you read. To record, click on the button above."}),(0,x.jsx)("div",{className:v,children:(0,x.jsx)("img",{src:h.Dd,alt:"star",className:b})})]})},F=a(1413),y=a(5861),N=a(9439),S=a(7757),R=a.n(S),B={formTitile:"AddReadingForm_formTitile__aT8iT",readingForm:"AddReadingForm_readingForm__Oub4O",inputWrapper:"AddReadingForm_inputWrapper__H-ZNz",pageInput:"AddReadingForm_pageInput__eIV8F",error:"AddReadingForm_error__bjRbB",correct:"AddReadingForm_correct__G0Go3",errorMessage:"AddReadingForm_errorMessage__o-64B",correctMessage:"AddReadingForm_correctMessage__8kdVp",formBtn:"AddReadingForm_formBtn__rQqnR",formBnt:"AddReadingForm_formBnt__OPDSz"},I=a(1134),P=a(4695),T=a(8007),A=function(e){var r,a=e.book,n=(0,s.useState)(!0),i=(0,N.Z)(n,2),c=i[0],d=i[1],l=a._id,u=a.totalPages,g=a.progress,m=(0,t.I0)(),p=g.map((function(e){return e.status})).some((function(e){return"active"===e})),_=(0,s.useState)(p),h=(0,N.Z)(_,2),j=h[0],f=h[1],v=c?p:j,b=T.Ry({page:T.Rx().required("Enter page number").typeError("Hmm... I think this is not a number :)").min(1).max("".concat(u))}),k=(0,I.cI)({mode:"onChange",resolver:(0,P.X)(b)}),S=k.register,A=k.handleSubmit,M=k.formState,Z=M.errors,D=M.isValid,C=M.dirtyFields,W=k.reset,w=function(){var e=(0,y.Z)(R().mark((function e(r){var a,n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.page,n={id:l,page:a},e.prev=2,!v){e.next=9;break}return e.next=6,m((0,o.GE)(n));case 6:f(!1),e.next=12;break;case 9:return e.next=11,m((0,o.m2)(n));case 11:f(!0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:return e.prev=17,d(!1),W(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,21]])})));return function(r){return e.apply(this,arguments)}}();return(0,x.jsxs)("section",{className:B.readingFormSection,children:[v?(0,x.jsx)("p",{className:B.formTitile,children:"Stop page:"}):(0,x.jsx)("p",{className:B.formTitile,children:"Start page:"}),(0,x.jsxs)("form",{onSubmit:A(w),autoComplete:"off",className:B.readingForm,children:[(0,x.jsxs)("div",{className:B.inputWrapper,children:[(0,x.jsx)("label",{htmlFor:"page",children:"Page number:"}),(0,x.jsx)("input",(0,F.Z)((0,F.Z)({type:"text",name:"page",id:"page"},S("page")),{},{className:"".concat(B.pageInput," ").concat(Z.page&&B.error," \n            ").concat(C.page&&!Z.page&&B.correct)})),(null===Z||void 0===Z?void 0:Z.page)&&(0,x.jsx)("p",{className:B.errorMessage,children:null===(r=Z.page)||void 0===r?void 0:r.message}),C.page&&!Z.page&&(0,x.jsx)("p",{className:B.correctMessage,children:"Correct"})]}),(0,x.jsx)("button",{disabled:!D,className:B.formBtn,children:v?"To stop":"To start"})]})]})},M={active:"Details_active__juBcP"},Z=function(e){var r=e.book.progress;return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("ul",{children:r.map((function(e){e.startPage,e.finishPage,e.startReading,e.finishReading;var r=e._id;e.speed,e.status;return(0,x.jsx)("li",{},r)}))})})},D=function(){return(0,x.jsx)(x.Fragment,{children:"STATISTICS"})},C=function(e){var r=e.book,a=(0,s.useState)("Diary"),n=(0,N.Z)(a,2),t=n[0],i=n[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:M.navigationLinks,children:[(0,x.jsx)("button",{onClick:function(){return i("Diary")},className:"".concat(M.navLink," ").concat("Diary"===t&&M.active),children:"Diary"}),(0,x.jsx)("button",{onClick:function(){return i("Statistics")},className:"".concat(M.navLink," ").concat("Statistics"===t&&M.active),children:"Statistics"})]}),"Diary"===t&&(0,x.jsx)(Z,{book:r}),"Statistics"===t&&(0,x.jsx)(D,{})]})},W=function(){var e,r=null===(e=(0,i.TH)().state)||void 0===e?void 0:e.bookId,a=(0,t.v9)(c);console.log("book: ",a);var l=(0,t.v9)(d),g=(0,t.I0)();return(0,s.useEffect)((function(){g((0,o.OY)(r))}),[g,r]),r?(0,x.jsxs)(x.Fragment,{children:[l&&(0,x.jsx)("p",{children:"Loading..."}),a&&(0,x.jsxs)("div",{className:n,children:[(0,x.jsxs)(u.Z,{children:[(0,x.jsx)(A,{book:a}),"unread"===a.status?(0,x.jsx)(k,{}):(0,x.jsx)(C,{book:a})]}),(0,x.jsx)(j,{book:a})]})]}):(0,x.jsx)(i.Fg,{to:"/library"})}}}]);
//# sourceMappingURL=202.c826c9cb.chunk.js.map