"use strict";(self.webpackChunkread_journey_project=self.webpackChunkread_journey_project||[]).push([[775],{7642:function(e,n,r){r.d(n,{Z:function(){return c}});var t="BookInfoComponent_bookInfoWrapper__gAI5R",o="BookInfoComponent_author__X+erf",i="BookInfoComponent_pages__RDM4j",s=r(6659),a=r(3329),c=function(e){var n=e.book,r=n.author,c=n.imageUrl,l=n.title,u=n.totalPages;return(0,a.jsxs)("div",{className:t,children:[(0,a.jsx)("img",{src:c||s.BZ,alt:l}),(0,a.jsx)("h3",{children:l}),(0,a.jsx)("p",{className:o,children:r}),(0,a.jsx)("p",{className:i,children:u})]})}},3978:function(e,n,r){r.d(n,{Z:function(){return l}});var t="Modal_backdrop__EiMyu",o="Modal_modal__8P5D2",i="Modal_modalCloseBtn__DvDur",s=r(4596),a=r(2791),c=r(3329),l=function(e){var n=e.children,r=e.isOpen,l=e.closeFnc,u=(0,a.useCallback)((function(){r&&l()}),[r,l]);(0,a.useEffect)((function(){var e=function(e){"Escape"===e.code&&u()};return window.addEventListener("keydown",e),document.body.style.overflow="hidden",function(){window.removeEventListener("keydown",e),document.body.style.overflow="auto"}}),[u]);return(0,c.jsx)("div",{className:t,onClick:function(e){e.target===e.currentTarget&&u()},children:(0,c.jsxs)("div",{className:o,children:[(0,c.jsx)("button",{className:i,onClick:u,children:(0,c.jsx)("svg",{width:"22",height:"22","aria-label":"cross icon",children:(0,c.jsx)("use",{href:s.Z+"#icon-sross"})})}),n]})})}},3974:function(e,n,r){r.d(n,{Z:function(){return i}});var t="UniversalButton_universalbtn__DCYzD",o=r(3329),i=function(e){var n=e.title,r=e.btnFunction;return(0,o.jsx)("button",{type:"button",onClick:r,className:t,children:n})}},7646:function(e,n,r){r.r(n),r.d(n,{default:function(){return D}});var t=r(1413),o=r(5861),i=r(9439),s=r(7757),a=r.n(s),c={},l=r(1134),u=r(2791),d=r(4695),h=r(8007),f=r(4420),m=r(746),x=r(3978),j=r(3329),p=function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{children:"\ud83d\udc4d"}),(0,j.jsx)("h3",{children:"Good job"}),(0,j.jsxs)("p",{children:["Your book is now in ",(0,j.jsx)("span",{children:"the library!"})," The joy knows no bounds and now you can start your training"]})]})},b=h.Ry({title:h.Z_().required("Book title is a required field"),author:h.Z_().required("The author is a required field"),totalPages:h.Rx().required("Number of pages is a required field").typeError("Hmm... I think this is not a number :)")}),v=function(){var e,n,r,s=(0,f.I0)(),h=(0,u.useState)(!1),v=(0,i.Z)(h,2),g=v[0],k=v[1],y=(0,l.cI)({mode:"onBlur",resolver:(0,d.X)(b)}),_=y.register,w=y.handleSubmit,Z=y.formState,C=Z.errors,B=Z.isValid,N=y.reset,F=function(){var e=(0,o.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s((0,m.lY)(n)).unwrap();case 3:N(),k(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{children:"Create your library:"}),(0,j.jsxs)("form",{onSubmit:w(F),autoComplete:"off",className:c.libraryForm,children:[(0,j.jsx)("label",{htmlFor:"title",children:"Book title:"}),(0,j.jsx)("input",(0,t.Z)({type:"text",name:"title",id:"title"},_("title"))),(0,j.jsx)("p",{children:null===(e=C.title)||void 0===e?void 0:e.message}),(0,j.jsx)("label",{htmlFor:"author",children:"The author:"}),(0,j.jsx)("input",(0,t.Z)({type:"text",name:"author",id:"author"},_("author"))),(0,j.jsx)("p",{children:null===(n=C.author)||void 0===n?void 0:n.message}),(0,j.jsx)("label",{htmlFor:"pages",children:"Number of pages:"}),(0,j.jsx)("input",(0,t.Z)({type:"text",name:"pages",id:"pages"},_("totalPages"))),(0,j.jsx)("p",{children:null===(r=C.totalPages)||void 0===r?void 0:r.message}),(0,j.jsx)("button",{type:"submit",disabled:!B,className:c.formBtn,children:"Add book"})]}),g&&(0,j.jsx)(x.Z,{isOpen:g,closeFnc:function(){k(!1)},children:(0,j.jsx)(p,{})})]})},g=function(e){return e.library.libraryBooks},k=function(e){return e.library.isLoading},y=function(e){return e.library.error},_=r(7642),w=r(3974),Z=r(6659),C=r(7689),B=function(e){var n=e.book,r=n.author,t=n.imageUrl,o=n.title,s=n._id,a=(0,f.I0)(),c=(0,C.s0)(),l=(0,u.useState)(!1),d=(0,i.Z)(l,2),h=d[0],p=d[1];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("li",{children:[(0,j.jsx)("button",{type:"button",onClick:function(){p(!0)},className:B.modalOpenBtn,children:(0,j.jsx)("img",{src:t||Z.BZ,alt:o,className:B.bookImage})}),(0,j.jsx)("h4",{children:o}),(0,j.jsx)("p",{children:r}),(0,j.jsx)("button",{type:"button",onClick:function(){a((0,m.uX)(s))},children:"Delete"})]}),h&&(0,j.jsxs)(x.Z,{isOpen:h,closeFnc:function(){p(!1)},children:[(0,j.jsx)(_.Z,{book:n}),(0,j.jsx)(w.Z,{title:"Start reading",btnFunction:function(){c("/reading",{state:{bookId:s}})}})]})]})},N=function(){var e=(0,f.v9)(g),n=(0,f.v9)(k),r=(0,f.v9)(y),t=(0,f.I0)();return(0,u.useEffect)((function(){t((0,m.nl)())}),[t]),(0,j.jsxs)("section",{children:[r&&(0,j.jsx)("p",{children:"Oops, something went wrong."}),(0,j.jsx)("h2",{children:"My library"}),n&&(0,j.jsx)("p",{children:"Loading..."}),(0,j.jsx)("ul",{children:e.map((function(e){return(0,j.jsx)(B,{book:e},e._id)}))})]})},F=r(6389),I=r(1087),E=function(){var e=(0,f.I0)(),n=(0,u.useState)([]),r=(0,i.Z)(n,2),t=r[0],s=r[1];return(0,u.useEffect)((function(){var n=function(){var n=(0,o.Z)(a().mark((function n(){var r,t,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new URLSearchParams({limit:30}),n.prev=1,n.next=4,e((0,F.Q)(r)).unwrap();case 4:t=n.sent,i=t.results,a=3,o=i.slice().sort((function(){return Math.random()-.5})).slice(0,a),s(o),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.error("Error fetching recommended books:",n.t0);case 12:case"end":return n.stop()}var i,a}),n,null,[[1,9]])})));return function(){return n.apply(this,arguments)}}();n()}),[e]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h3",{children:"Recommended books"}),(0,j.jsx)("ul",{children:t.map((function(e){var n=e.imageUrl,r=e.title,t=e.author,o=e._id;return(0,j.jsxs)("li",{children:[(0,j.jsx)("img",{src:n||Z.BZ,alt:r}),(0,j.jsx)("h4",{children:r}),(0,j.jsx)("p",{children:t})]},o)}))}),(0,j.jsx)(I.rU,{className:E.recommebdedLink,to:"/",children:"Home"})]})},S=r(1809),D=function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(S.Z,{children:[(0,j.jsx)(v,{}),(0,j.jsx)(E,{})]}),(0,j.jsx)(N,{})]})}}}]);
//# sourceMappingURL=775.02f9e0dd.chunk.js.map