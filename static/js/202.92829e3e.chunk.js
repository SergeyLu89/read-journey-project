"use strict";(self.webpackChunkread_journey_project=self.webpackChunkread_journey_project||[]).push([[202],{3918:function(e,r,n){n.r(r),n.d(r,{default:function(){return D}});var a="ReadingPage_readingPageWrapper__v6iag",t=n(2791),s=n(4420),i=n(7689),o=n(8332),c=function(e){return e.reading.readingBook},d=function(e){return e.reading.isLoading},l=function(e){return e.reading.isWhileReading},u=n(1809),g={},m=n(7766),p=n(3329),h=function(e){var r=e.book,n=(0,s.v9)(l),a=r.imageUrl,t=r.title,i=r.author;return(0,p.jsxs)("section",{children:[(0,p.jsx)("h2",{children:"My reading"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("img",{src:a||m.ed,alt:t}),(0,p.jsx)("h3",{children:t}),(0,p.jsx)("p",{children:i})]}),n?(0,p.jsx)("span",{className:g.indicatorStop,children:"STOP"}):(0,p.jsx)("span",{className:g.indicatorStart,children:"START"})]})},x="Progress_progressSection__4btKy",_="Progress_imageWrapper__oM5ug",j="Progress_starImage__gnxPj",f=function(){return(0,p.jsxs)("section",{className:x,children:[(0,p.jsx)("h3",{children:"Progress"}),(0,p.jsx)("p",{children:"Here you will see when and how much you read. To record, click on the button above."}),(0,p.jsx)("div",{className:_,children:(0,p.jsx)("img",{src:m.Dd,alt:"star",className:j})})]})},v=n(1413),b=n(5861),k=n(9439),F=n(7757),S=n.n(F),N={formTitile:"AddReadingForm_formTitile__aT8iT",readingForm:"AddReadingForm_readingForm__Oub4O",inputWrapper:"AddReadingForm_inputWrapper__H-ZNz",pageInput:"AddReadingForm_pageInput__eIV8F",error:"AddReadingForm_error__bjRbB",correct:"AddReadingForm_correct__G0Go3",errorMessage:"AddReadingForm_errorMessage__o-64B",correctMessage:"AddReadingForm_correctMessage__8kdVp",formBtn:"AddReadingForm_formBtn__rQqnR",formBnt:"AddReadingForm_formBnt__OPDSz"},R=n(1134),y=n(4695),T=n(8007),P=function(e){var r,n=e.book,a=(0,t.useState)(!0),i=(0,k.Z)(a,2),c=i[0],d=i[1],l=n._id,u=n.totalPages,g=n.progress,m=(0,s.I0)(),h=g.map((function(e){return e.status})).some((function(e){return"active"===e})),x=(0,t.useState)(h),_=(0,k.Z)(x,2),j=_[0],f=_[1],F=c?h:j,P=T.Ry({page:T.Rx().required("Enter page number").typeError("Hmm... I think this is not a number :)").min(1).max("".concat(u))}),A=(0,R.cI)({mode:"onChange",resolver:(0,y.X)(P)}),I=A.register,B=A.handleSubmit,C=A.formState,D=C.errors,M=C.isValid,Z=C.dirtyFields,w=A.reset,W=function(){var e=(0,b.Z)(S().mark((function e(r){var n,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.page,a={id:l,page:n},e.prev=2,!F){e.next=9;break}return e.next=6,m((0,o.GE)(a));case 6:f(!1),e.next=12;break;case 9:return e.next=11,m((0,o.m2)(a));case 11:f(!0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:return e.prev=17,d(!1),w(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,21]])})));return function(r){return e.apply(this,arguments)}}();return(0,p.jsxs)("section",{className:N.readingFormSection,children:[F?(0,p.jsx)("p",{className:N.formTitile,children:"Stop page:"}):(0,p.jsx)("p",{className:N.formTitile,children:"Start page:"}),(0,p.jsxs)("form",{onSubmit:B(W),autoComplete:"off",className:N.readingForm,children:[(0,p.jsxs)("div",{className:N.inputWrapper,children:[(0,p.jsx)("label",{htmlFor:"page",children:"Page number:"}),(0,p.jsx)("input",(0,v.Z)((0,v.Z)({type:"text",name:"page",id:"page"},I("page")),{},{className:"".concat(N.pageInput," ").concat(D.page&&N.error," \n            ").concat(Z.page&&!D.page&&N.correct)})),(null===D||void 0===D?void 0:D.page)&&(0,p.jsx)("p",{className:N.errorMessage,children:null===(r=D.page)||void 0===r?void 0:r.message}),Z.page&&!D.page&&(0,p.jsx)("p",{className:N.correctMessage,children:"Correct"})]}),(0,p.jsx)("button",{disabled:!M,className:N.formBtn,children:F?"To stop":"To start"})]})]})},A={active:"Details_active__juBcP"},I=function(e){var r=e.book.progress;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("ul",{children:r.map((function(e){e.startPage,e.finishPage,e.startReading,e.finishReading;var r=e._id;e.speed,e.status;return(0,p.jsx)("li",{},r)}))})})},B=function(){return(0,p.jsx)(p.Fragment,{children:"STATISTICS"})},C=function(e){var r=e.book,n=(0,t.useState)("Diary"),a=(0,k.Z)(n,2),s=a[0],i=a[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:A.navigationLinks,children:[(0,p.jsx)("button",{onClick:function(){return i("Diary")},className:"".concat(A.navLink," ").concat("Diary"===s&&A.active),children:"Diary"}),(0,p.jsx)("button",{onClick:function(){return i("Statistics")},className:"".concat(A.navLink," ").concat("Statistics"===s&&A.active),children:"Statistics"})]}),"Diary"===s&&(0,p.jsx)(I,{book:r}),"Statistics"===s&&(0,p.jsx)(B,{})]})},D=function(){var e,r=null===(e=(0,i.TH)().state)||void 0===e?void 0:e.bookId,n=(0,s.v9)(c);console.log("book: ",n);var l=(0,s.v9)(d),g=(0,s.I0)();return(0,t.useEffect)((function(){g((0,o.OY)(r))}),[g,r]),r?(0,p.jsxs)(p.Fragment,{children:[l&&(0,p.jsx)("p",{children:"Loading..."}),n&&(0,p.jsxs)("div",{className:a,children:[(0,p.jsxs)(u.Z,{children:[(0,p.jsx)(P,{book:n}),"unread"===n.status?(0,p.jsx)(f,{}):(0,p.jsx)(C,{book:n})]}),(0,p.jsx)(h,{book:n})]})]}):(0,p.jsx)(i.Fg,{to:"/library"})}}}]);
//# sourceMappingURL=202.92829e3e.chunk.js.map