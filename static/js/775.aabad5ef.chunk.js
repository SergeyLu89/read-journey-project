"use strict";(self.webpackChunkread_journey_project=self.webpackChunkread_journey_project||[]).push([[775],{1197:function(e,n,r){var t=r(6659),i=r(3329);n.Z=function(e){var n=e.book,r=n.author,o=n.imageUrl,s=n.title,a=n.totalPages;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:o||t.BZ,alt:s}),(0,i.jsx)("h3",{children:s}),(0,i.jsx)("p",{children:r}),(0,i.jsx)("p",{children:a})]})}},3978:function(e,n,r){r.d(n,{Z:function(){return l}});var t="Modal_backdrop__EiMyu",i="Modal_modal__8P5D2",o="Modal_modalCloseBtn__DvDur",s=r(4596),a=r(2791),c=r(3329),l=function(e){var n=e.children,r=e.isOpen,l=e.closeFnc,u=(0,a.useCallback)((function(){r&&l()}),[r,l]);(0,a.useEffect)((function(){var e=function(e){"Escape"===e.code&&u()};return window.addEventListener("keydown",e),document.body.style.overflow="hidden",function(){window.removeEventListener("keydown",e),document.body.style.overflow="auto"}}),[u]);return(0,c.jsx)("div",{className:t,onClick:function(e){e.target===e.currentTarget&&u()},children:(0,c.jsxs)("div",{className:i,children:[(0,c.jsx)("button",{className:o,onClick:u,children:(0,c.jsx)("svg",{width:"22",height:"22","aria-label":"cross icon",children:(0,c.jsx)("use",{href:s.Z+"#icon-sross"})})}),n]})})}},8977:function(e,n,r){var t=r(3329);n.Z=function(e){var n=e.title,r=e.btnFunction;return(0,t.jsx)("button",{type:"button",onClick:r,children:n})}},7646:function(e,n,r){r.r(n),r.d(n,{default:function(){return q}});var t=r(1413),i=r(5861),o=r(9439),s=r(7757),a=r.n(s),c={},l=r(1134),u=r(2791),d=r(4695),h=r(8007),x=r(4420),f=r(746),j=r(3978),m=r(3329),p=function(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{children:"\ud83d\udc4d"}),(0,m.jsx)("h3",{children:"Good job"}),(0,m.jsxs)("p",{children:["Your book is now in ",(0,m.jsx)("span",{children:"the library!"})," The joy knows no bounds and now you can start your training"]})]})},b=h.Ry({title:h.Z_().required("Book title is a required field"),author:h.Z_().required("The author is a required field"),totalPages:h.Rx().required("Number of pages is a required field").typeError("Hmm... I think this is not a number :)")}),v=function(){var e,n,r,s=(0,x.I0)(),h=(0,u.useState)(!1),v=(0,o.Z)(h,2),g=v[0],k=v[1],y=(0,l.cI)({mode:"onBlur",resolver:(0,d.X)(b)}),w=y.register,Z=y.handleSubmit,_=y.formState,F=_.errors,C=_.isValid,B=y.reset,N=function(){var e=(0,i.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s((0,f.lY)(n)).unwrap();case 3:B(),k(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{children:"Create your library:"}),(0,m.jsxs)("form",{onSubmit:Z(N),autoComplete:"off",className:c.libraryForm,children:[(0,m.jsx)("label",{htmlFor:"title",children:"Book title:"}),(0,m.jsx)("input",(0,t.Z)({type:"text",name:"title",id:"title"},w("title"))),(0,m.jsx)("p",{children:null===(e=F.title)||void 0===e?void 0:e.message}),(0,m.jsx)("label",{htmlFor:"author",children:"The author:"}),(0,m.jsx)("input",(0,t.Z)({type:"text",name:"author",id:"author"},w("author"))),(0,m.jsx)("p",{children:null===(n=F.author)||void 0===n?void 0:n.message}),(0,m.jsx)("label",{htmlFor:"pages",children:"Number of pages:"}),(0,m.jsx)("input",(0,t.Z)({type:"text",name:"pages",id:"pages"},w("totalPages"))),(0,m.jsx)("p",{children:null===(r=F.totalPages)||void 0===r?void 0:r.message}),(0,m.jsx)("button",{type:"submit",disabled:!C,className:c.formBtn,children:"Add book"})]}),g&&(0,m.jsx)(j.Z,{isOpen:g,closeFnc:function(){k(!1)},children:(0,m.jsx)(p,{})})]})},g=function(e){return e.library.libraryBooks},k=function(e){return e.library.isLoading},y=function(e){return e.library.error},w=r(1197),Z=r(8977),_=r(6659),F=r(7689),C=function(e){var n=e.book,r=n.author,t=n.imageUrl,i=n.title,s=n._id,a=(0,x.I0)(),c=(0,F.s0)(),l=(0,u.useState)(!1),d=(0,o.Z)(l,2),h=d[0],p=d[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("li",{children:[(0,m.jsx)("button",{type:"button",onClick:function(){p(!0)},className:C.modalOpenBtn,children:(0,m.jsx)("img",{src:t||_.BZ,alt:i,className:C.bookImage})}),(0,m.jsx)("h4",{children:i}),(0,m.jsx)("p",{children:r}),(0,m.jsx)("button",{type:"button",onClick:function(){a((0,f.uX)(s))},children:"Delete"})]}),h&&(0,m.jsxs)(j.Z,{isOpen:h,closeFnc:function(){p(!1)},children:[(0,m.jsx)(w.Z,{book:n}),(0,m.jsx)(Z.Z,{title:"Start reading",btnFunction:function(){c("/reading",{state:{bookId:s}})}})]})]})},B=function(){var e=(0,x.v9)(g),n=(0,x.v9)(k),r=(0,x.v9)(y),t=(0,x.I0)();return(0,u.useEffect)((function(){t((0,f.nl)())}),[t]),(0,m.jsxs)("section",{children:[r&&(0,m.jsx)("p",{children:"Oops, something went wrong."}),(0,m.jsx)("h2",{children:"My library"}),n&&(0,m.jsx)("p",{children:"Loading..."}),(0,m.jsx)("ul",{children:e.map((function(e){return(0,m.jsx)(C,{book:e},e._id)}))})]})},N=r(6389),E=r(1087),I=function(){var e=(0,x.I0)(),n=(0,u.useState)([]),r=(0,o.Z)(n,2),t=r[0],s=r[1];return(0,u.useEffect)((function(){var n=function(){var n=(0,i.Z)(a().mark((function n(){var r,t,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new URLSearchParams({limit:30}),n.prev=1,n.next=4,e((0,N.Q)(r)).unwrap();case 4:t=n.sent,o=t.results,a=3,i=o.slice().sort((function(){return Math.random()-.5})).slice(0,a),s(i),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.error("Error fetching recommended books:",n.t0);case 12:case"end":return n.stop()}var o,a}),n,null,[[1,9]])})));return function(){return n.apply(this,arguments)}}();n()}),[e]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h3",{children:"Recommended books"}),(0,m.jsx)("ul",{children:t.map((function(e){var n=e.imageUrl,r=e.title,t=e.author,i=e._id;return(0,m.jsxs)("li",{children:[(0,m.jsx)("img",{src:n||_.BZ,alt:r}),(0,m.jsx)("h4",{children:r}),(0,m.jsx)("p",{children:t})]},i)}))}),(0,m.jsx)(E.rU,{className:I.recommebdedLink,to:"/",children:"Home"})]})},S=r(1809),q=function(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(S.Z,{children:[(0,m.jsx)(v,{}),(0,m.jsx)(I,{})]}),(0,m.jsx)(B,{})]})}}}]);
//# sourceMappingURL=775.aabad5ef.chunk.js.map