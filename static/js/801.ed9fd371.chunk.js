"use strict";(self.webpackChunkread_journey_project=self.webpackChunkread_journey_project||[]).push([[801],{4472:function(e,a,r){r.r(a),r.d(a,{default:function(){return ne}});var s="ReadingPage_readingPageWrapper__v6iag",i=r(2791),t=r(4420),n=r(7689),c=r(8332),o=function(e){return e.reading.readingBook},d=function(e){return e.reading.isLoading},l=function(e){return e.reading.isWhileReading},_=r(1809),g="MyBook_myBookSction__tYIsb",p="MyBook_titleWrapper__MhOFj",u="MyBook_readingTime__OQ4Nk",m="MyBook_bookWrapper__gz46v",h="MyBook_statusSvg__aBDWL",x=r(4596),j=r(6042),f=r(3329),v=function(e){var a=e.book,r=(0,t.v9)(l),s=a.imageUrl,i=a.title,n=a.author,c=a.timeLeftToRead,o=null===c||void 0===c?void 0:c.hours,d=null===c||void 0===c?void 0:c.minutes;return(0,f.jsxs)("section",{className:g,children:[(0,f.jsxs)("div",{className:p,children:[(0,f.jsx)("h2",{children:"My reading"}),c&&(0,f.jsxs)("p",{className:u,children:[o," hours and ",d," minutes left"]})]}),(0,f.jsxs)("div",{className:m,children:[(0,f.jsx)("img",{src:s||j.ed,alt:i}),(0,f.jsx)("h3",{children:i}),(0,f.jsx)("p",{children:n})]}),r?(0,f.jsx)("svg",{className:h,"aria-label":"stop icon",children:(0,f.jsx)("use",{href:x.Z+"#icon-stop"})}):(0,f.jsx)("svg",{className:h,"aria-label":"start icon",children:(0,f.jsx)("use",{href:x.Z+"#icon-start"})})]})},y="Progress_progressSection__4btKy",N="Progress_imageWrapper__oM5ug",b="Progress_starImage__gnxPj",D=function(){return(0,f.jsxs)("section",{className:y,children:[(0,f.jsx)("h3",{children:"Progress"}),(0,f.jsx)("p",{children:"Here you will see when and how much you read. To record, click on the button above."}),(0,f.jsx)("div",{className:N,children:(0,f.jsx)("img",{src:j.Dd,alt:"star",className:b})})]})},k=r(1413),I=r(5861),S=r(9439),B=r(4687),R=r.n(B),F={formTitile:"AddReadingForm_formTitile__aT8iT",readingForm:"AddReadingForm_readingForm__Oub4O",inputWrapper:"AddReadingForm_inputWrapper__H-ZNz",pageInput:"AddReadingForm_pageInput__eIV8F",error:"AddReadingForm_error__bjRbB",correct:"AddReadingForm_correct__G0Go3",errorMessage:"AddReadingForm_errorMessage__o-64B",correctMessage:"AddReadingForm_correctMessage__8kdVp",formBtn:"AddReadingForm_formBtn__rQqnR",bookIsReadBox:"AddReadingForm_bookIsReadBox__eOZlc",booksImg:"AddReadingForm_booksImg__O47ui",description:"AddReadingForm_description__QF1Z8",formBnt:"AddReadingForm_formBnt__OPDSz"},P=r(1134),w=r(4695),W=r(8007),Z=r(3978),T=r(2564),A=r(530),M=function(e){var a,r=e.book,s=(0,i.useState)(!0),n=(0,S.Z)(s,2),o=n[0],d=n[1],l=r._id,_=r.totalPages,g=r.progress,p=(0,t.I0)(),u=(0,i.useState)(!1),m=(0,S.Z)(u,2),h=m[0],x=m[1],v=g.map((function(e){return e.status})).some((function(e){return"active"===e})),y=(0,i.useState)(v),N=(0,S.Z)(y,2),b=N[0],D=N[1],B=o?v:b,M=W.Ry({page:W.Rx().required("Enter page number").typeError("Hmm... I think this is not a number :)").min(1).max("".concat(_))}),L=(0,P.cI)({mode:"onChange",resolver:(0,w.X)(M)}),O=L.register,C=L.handleSubmit,H=L.formState,z=H.errors,U=H.isValid,V=H.dirtyFields,E=L.reset,G=function(){var e=(0,I.Z)(R().mark((function e(a){var r,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.page,s={id:l,page:r},e.prev=2,!B){e.next=11;break}return e.next=6,p((0,c.GE)(s));case 6:D(!1),T.Am.success("Reading finish",A.$),r===_&&x(!0),e.next=15;break;case 11:return e.next=13,p((0,c.m2)(s));case 13:D(!0),T.Am.success("Reading started",A.$);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),T.Am.error("Oops, something went wrong",A.$),console.error(e.t0);case 21:return e.prev=21,d(!1),E(),e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[2,17,21,25]])})));return function(a){return e.apply(this,arguments)}}();return(0,f.jsxs)("section",{className:F.readingFormSection,children:[B?(0,f.jsx)("p",{className:F.formTitile,children:"Stop page:"}):(0,f.jsx)("p",{className:F.formTitile,children:"Start page:"}),(0,f.jsxs)("form",{onSubmit:C(G),autoComplete:"off",className:F.readingForm,children:[(0,f.jsxs)("div",{className:F.inputWrapper,children:[(0,f.jsx)("label",{htmlFor:"page",children:"Page number:"}),(0,f.jsx)("input",(0,k.Z)((0,k.Z)({type:"text",name:"page",id:"page"},O("page")),{},{className:"".concat(F.pageInput," ").concat(z.page&&F.error," \n            ").concat(V.page&&!z.page&&F.correct)})),(null===z||void 0===z?void 0:z.page)&&(0,f.jsx)("p",{className:F.errorMessage,children:null===(a=z.page)||void 0===a?void 0:a.message}),V.page&&!z.page&&(0,f.jsx)("p",{className:F.correctMessage,children:"Correct"})]}),(0,f.jsx)("button",{disabled:!U,className:F.formBtn,children:B?"To stop":"To start"})]}),h&&(0,f.jsx)(Z.Z,{isOpen:h,closeFnc:function(){x(!1)},children:(0,f.jsxs)("div",{className:F.bookIsReadBox,children:[(0,f.jsx)("img",{src:j.PN,alt:"books",className:F.booksImg}),(0,f.jsx)("h3",{children:"The book is read"}),(0,f.jsxs)("p",{className:F.description,children:["It was an ",(0,f.jsx)("span",{children:"exciting journey"}),", where each page revealed new horizons, and the characters became inseparable friends."]})]})})]})},L="Details_detailsScetion__deWm+",O="Details_detailsBtnWrapper__2IVfF",C="Details_detailsBtnSvg__LyszN",H="Details_detailsBtn__wTnVd",z="Details_active__juBcP",U=r(3433),V={diary:"Diary_diary__msjM1",dairyList:"Diary_dairyList__iHs6-",date:"Diary_date__zj2hD",dairyListItemSvg:"Diary_dairyListItemSvg__BpiHz",diaryItem:"Diary_diaryItem__pLnKA",diaryWrapper:"Diary_diaryWrapper__gj6eX",svgWrapper:"Diary_svgWrapper__TFIRO",diaryHeader:"Diary_diaryHeader__iUORi",diaryDate:"Diary_diaryDate__Bt+fl",pageRead:"Diary_pageRead__cxLNa",sprintList:"Diary_sprintList__a8z3U",sprintItem:"Diary_sprintItem__u-x1R",totalPercentage:"Diary_totalPercentage__vr0OI",minuteDifference:"Diary_minuteDifference__cXzGy",graphWrapper:"Diary_graphWrapper__DQanu",graphBox:"Diary_graphBox__4Icni",graphImg:"Diary_graphImg__Or0aY",speed:"Diary_speed__2Hdq4",deleteBtn:"Diary_deleteBtn__o2RjS",deleteSvg:"Diary_deleteSvg__Gn0J5"},E=function(e){var a=e.reduce((function(e,a){var r=function(e){var a=new Date(e),r=String(a.getUTCDate()).padStart(2,"0"),s=String(a.getUTCMonth()+1).padStart(2,"0"),i=a.getUTCFullYear();return"".concat(r,".").concat(s,".").concat(i)}(a.startReading);return e[r]?e[r].push(a):e[r]=[a],e}),{});return Object.entries(a).reverse()},G=function(e){var a=e.sprint,r=e.totalPages,s=e.bookId,i=(0,t.I0)(),n=new URLSearchParams({bookId:s,readingId:a._id});if(!a.finishPage)return null;var o=(100*(a.finishPage-a.startPage)/r).toFixed(2),d=function(e,a){var r=new Date(e),s=new Date(a)-r;return{minuteDifference:Math.floor(s/6e4)}}(a.startReading,a.finishReading).minuteDifference,l=a.speed;return(0,f.jsxs)("li",{className:V.sprintItem,children:[(0,f.jsxs)("div",{className:V.percentageBox,children:[(0,f.jsxs)("p",{className:V.totalPercentage,children:[o,"%"]}),(0,f.jsxs)("p",{className:V.minuteDifference,children:[d," ",1===d?"minute":"minutes"]})]}),(0,f.jsxs)("div",{className:V.graphWrapper,children:[(0,f.jsxs)("div",{className:V.graphBox,children:[(0,f.jsx)("img",{src:j.f9,alt:"grapf",className:V.graphImg}),(0,f.jsxs)("p",{className:V.speed,children:[l," ",1===l?"page":"pages"," per hour"]})]}),(0,f.jsx)("button",{type:"button",onClick:function(){return i((0,c.jF)(n))},className:V.deleteBtn,children:(0,f.jsx)("svg",{className:V.deleteSvg,"aria-label":"trash icon",children:(0,f.jsx)("use",{href:x.Z+"#icon-trash"})})})]})]})},q=function(e){var a=e.day,r=e.sprints,s=e.totalPages,i=e.bookId;if(1===r.length&&"active"===r[0].status)return null;var t=function(e,a){var r;if(0===e.length||1===e.length&&"active"===e[0].status)return 1;var s=null!==(r=e[e.length-1].finishPage)&&void 0!==r?r:e[e.length-2].finishPage;return s>a?a:s}(r,s);return(0,f.jsx)("li",{className:V.diaryItem,children:(0,f.jsxs)("div",{className:V.diaryWrapper,children:[(0,f.jsxs)("div",{className:V.diaryHeader,children:[(0,f.jsx)("div",{className:V.svgWrapper,children:(0,f.jsx)("svg",{className:V.dairyListItemSvg,"aria-label":"block icon",children:(0,f.jsx)("use",{href:x.Z+"#icon-block"})})}),(0,f.jsxs)("div",{className:V.diaryDate,children:[(0,f.jsx)("p",{className:V.date,children:a}),(0,f.jsxs)("p",{className:V.pageRead,children:[t," ",1===t?"page":"pages"]})]})]}),(0,f.jsx)("ul",{className:V.sprintList,children:(0,U.Z)(r).reverse().map((function(e){return(0,f.jsx)(G,{sprint:e,totalPages:s,bookId:i},e._id)}))})]})})},Q=function(e){var a=e.book,r=a.totalPages,s=a.progress,i=E(s);return(0,f.jsxs)("section",{className:V.diary,children:[(0,f.jsx)("h3",{children:"Diary"}),(0,f.jsx)("ul",{className:V.dairyList,children:i.map((function(e){var s=(0,S.Z)(e,2),i=s[0],t=s[1];return(0,f.jsx)(q,{day:i,sprints:t,totalPages:r,bookId:a._id},i)}))})]})},X="Statistics_statisticsBlok__DuJqf",Y="Statistics_statisticsDescr__Dysij",J="Statistics_chartWrapper__5odmb",$="Statistics_chartBox__ZZV5w",K="Statistics_pie__-xJWB",ee="Statistics_pieDescriptionBox__-VgHF",ae="Statistics_colorBox__-yj1N",re="Statistics_pieDescription__gXsxB",se=function(e){var a=e.book,r=a.totalPages,s=function(e,a){var r,s=null!==(r=e[e.length-1].finishPage)&&void 0!==r?r:e[e.length-2].finishPage;return s>a?a:s}(a.progress,r),i=(100*s/r).toFixed(2);return(0,f.jsxs)("div",{className:X,children:[(0,f.jsx)("h3",{children:"Statistics"}),(0,f.jsx)("p",{className:Y,children:"Each page, each chapter is a new round of knowledge, a new step towards understanding. By rewriting statistics, we create our own reading history."}),(0,f.jsxs)("div",{className:J,children:[(0,f.jsx)("div",{className:$,children:(0,f.jsx)("div",{className:K,style:{"--p":"".concat(i)},children:"100%"})}),(0,f.jsxs)("div",{className:ee,children:[(0,f.jsx)("div",{className:ae}),(0,f.jsxs)("div",{className:re,children:[(0,f.jsxs)("span",{children:[i,"%"]}),(0,f.jsxs)("p",{children:[s," ",1!==s?"pages":"page"," read"]})]})]})]})]})},ie=function(e){var a=e.book,r=(0,i.useState)("Diary"),s=(0,S.Z)(r,2),t=s[0],n=s[1];return(0,f.jsxs)("section",{className:L,children:[(0,f.jsxs)("div",{className:O,children:[(0,f.jsx)("button",{onClick:function(){return n("Diary")},className:"".concat(H," ").concat("Diary"===t&&z),children:(0,f.jsx)("svg",{"aria-label":"hourglass icon",className:C,children:(0,f.jsx)("use",{href:x.Z+"#icon-hourglass"})})}),(0,f.jsx)("button",{onClick:function(){return n("Statistics")},className:"".concat(H," ").concat("Statistics"===t&&z),children:(0,f.jsx)("svg",{"aria-label":"pie icon",className:C,children:(0,f.jsx)("use",{href:x.Z+"#icon-pie"})})})]}),"Diary"===t&&(0,f.jsx)(Q,{book:a}),"Statistics"===t&&(0,f.jsx)(se,{book:a})]})},te=r(1281),ne=function(){var e,a=null===(e=(0,n.TH)().state)||void 0===e?void 0:e.bookId,r=(0,t.v9)(o),l=(0,t.v9)(d),g=(0,t.I0)();return(0,i.useEffect)((function(){g((0,c.OY)(a))}),[g,a]),a?(0,f.jsxs)(f.Fragment,{children:[l&&(0,f.jsx)(te.a,{}),r&&(0,f.jsxs)("div",{className:s,children:[(0,f.jsxs)(_.Z,{children:[(0,f.jsx)(M,{book:r}),"unread"===r.status?(0,f.jsx)(D,{}):(0,f.jsx)(ie,{book:r})]}),(0,f.jsx)(v,{book:r})]})]}):(0,f.jsx)(n.Fg,{to:"/library"})}},5462:function(){}}]);
//# sourceMappingURL=801.ed9fd371.chunk.js.map