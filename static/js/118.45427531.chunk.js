"use strict";(self.webpackChunkread_journey_project=self.webpackChunkread_journey_project||[]).push([[118],{2691:function(e,r,s){s.r(r),s.d(r,{default:function(){return J}});var a="ReadingPage_readingPageWrapper__v6iag",t=s(2791),i=s(4420),n=s(7689),o=s(8332),c=function(e){return e.reading.readingBook},d=function(e){return e.reading.isLoading},l=function(e){return e.reading.isWhileReading},u=s(1809),g="MyBook_myBookSction__tYIsb",p="MyBook_titleWrapper__MhOFj",_="MyBook_readingTime__OQ4Nk",m="MyBook_bookWrapper__gz46v",h="MyBook_statusSvg__aBDWL",x=s(4596),j=s(7766),v=s(3329),f=function(e){var r=e.book,s=(0,i.v9)(l),a=r.imageUrl,t=r.title,n=r.author,o=r.timeLeftToRead,c=null===o||void 0===o?void 0:o.hours,d=null===o||void 0===o?void 0:o.minutes;return(0,v.jsxs)("section",{className:g,children:[(0,v.jsxs)("div",{className:p,children:[(0,v.jsx)("h2",{children:"My reading"}),o&&(0,v.jsxs)("p",{className:_,children:[c," hours and ",d," minutes left"]})]}),(0,v.jsxs)("div",{className:m,children:[(0,v.jsx)("img",{src:a||j.ed,alt:t}),(0,v.jsx)("h3",{children:t}),(0,v.jsx)("p",{children:n})]}),s?(0,v.jsx)("svg",{className:h,"aria-label":"stop icon",children:(0,v.jsx)("use",{href:x.Z+"#icon-stop"})}):(0,v.jsx)("svg",{className:h,"aria-label":"start icon",children:(0,v.jsx)("use",{href:x.Z+"#icon-start"})})]})},b="Progress_progressSection__4btKy",k="Progress_imageWrapper__oM5ug",N="Progress_starImage__gnxPj",y=function(){return(0,v.jsxs)("section",{className:b,children:[(0,v.jsx)("h3",{children:"Progress"}),(0,v.jsx)("p",{children:"Here you will see when and how much you read. To record, click on the button above."}),(0,v.jsx)("div",{className:k,children:(0,v.jsx)("img",{src:j.Dd,alt:"star",className:N})})]})},S=s(1413),F=s(5861),B=s(9439),R=s(4687),P=s.n(R),w={formTitile:"AddReadingForm_formTitile__aT8iT",readingForm:"AddReadingForm_readingForm__Oub4O",inputWrapper:"AddReadingForm_inputWrapper__H-ZNz",pageInput:"AddReadingForm_pageInput__eIV8F",error:"AddReadingForm_error__bjRbB",correct:"AddReadingForm_correct__G0Go3",errorMessage:"AddReadingForm_errorMessage__o-64B",correctMessage:"AddReadingForm_correctMessage__8kdVp",formBtn:"AddReadingForm_formBtn__rQqnR",formBnt:"AddReadingForm_formBnt__OPDSz"},D=s(1134),M=s(4695),T=s(8007),Z=function(e){var r,s=e.book,a=(0,t.useState)(!0),n=(0,B.Z)(a,2),c=n[0],d=n[1],l=s._id,u=s.totalPages,g=s.progress,p=(0,i.I0)(),_=g.map((function(e){return e.status})).some((function(e){return"active"===e})),m=(0,t.useState)(_),h=(0,B.Z)(m,2),x=h[0],j=h[1],f=c?_:x,b=T.Ry({page:T.Rx().required("Enter page number").typeError("Hmm... I think this is not a number :)").min(1).max("".concat(u))}),k=(0,D.cI)({mode:"onChange",resolver:(0,M.X)(b)}),N=k.register,y=k.handleSubmit,R=k.formState,Z=R.errors,I=R.isValid,W=R.dirtyFields,A=k.reset,C=function(){var e=(0,F.Z)(P().mark((function e(r){var s,a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.page,a={id:l,page:s},e.prev=2,!f){e.next=9;break}return e.next=6,p((0,o.GE)(a));case 6:j(!1),e.next=12;break;case 9:return e.next=11,p((0,o.m2)(a));case 11:j(!0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:return e.prev=17,d(!1),A(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,21]])})));return function(r){return e.apply(this,arguments)}}();return(0,v.jsxs)("section",{className:w.readingFormSection,children:[f?(0,v.jsx)("p",{className:w.formTitile,children:"Stop page:"}):(0,v.jsx)("p",{className:w.formTitile,children:"Start page:"}),(0,v.jsxs)("form",{onSubmit:y(C),autoComplete:"off",className:w.readingForm,children:[(0,v.jsxs)("div",{className:w.inputWrapper,children:[(0,v.jsx)("label",{htmlFor:"page",children:"Page number:"}),(0,v.jsx)("input",(0,S.Z)((0,S.Z)({type:"text",name:"page",id:"page"},N("page")),{},{className:"".concat(w.pageInput," ").concat(Z.page&&w.error," \n            ").concat(W.page&&!Z.page&&w.correct)})),(null===Z||void 0===Z?void 0:Z.page)&&(0,v.jsx)("p",{className:w.errorMessage,children:null===(r=Z.page)||void 0===r?void 0:r.message}),W.page&&!Z.page&&(0,v.jsx)("p",{className:w.correctMessage,children:"Correct"})]}),(0,v.jsx)("button",{disabled:!I,className:w.formBtn,children:f?"To stop":"To start"})]})]})},I={active:"Details_active__juBcP"},W=function(e){var r=e.book.progress;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("ul",{children:r.map((function(e){e.startPage,e.finishPage,e.startReading,e.finishReading;var r=e._id;e.speed,e.status;return(0,v.jsx)("li",{},r)}))})})},A="Statistics_statisticsBlok__DuJqf",C="Statistics_statisticsDescr__Dysij",L="Statistics_chartWrapper__5odmb",O="Statistics_chartBox__ZZV5w",E="Statistics_pie__-xJWB",H="Statistics_pieDescriptionBox__-VgHF",V="Statistics_colorBox__-yj1N",q="Statistics_pieDescription__gXsxB",z=function(e){var r=e.book,s=r.totalPages,a=function(e,r){var s,a=null!==(s=e[e.length-1].finishPage)&&void 0!==s?s:e[e.length-2].finishPage;return a>r?r:a}(r.progress,s),t=(100*a/s).toFixed(2);return(0,v.jsxs)("div",{className:A,children:[(0,v.jsx)("h3",{children:"Statistics"}),(0,v.jsx)("p",{className:C,children:"Each page, each chapter is a new round of knowledge, a new step towards understanding. By rewriting statistics, we create our own reading history."}),(0,v.jsxs)("div",{className:L,children:[(0,v.jsx)("div",{className:O,children:(0,v.jsx)("div",{className:E,style:{"--p":"".concat(t)},children:"100%"})}),(0,v.jsxs)("div",{className:H,children:[(0,v.jsx)("div",{className:V}),(0,v.jsxs)("div",{className:q,children:[(0,v.jsxs)("span",{children:[t,"%"]}),(0,v.jsxs)("p",{children:[a," ",1!==a?"pages":"page"," read"]})]})]})]})]})},G=function(e){var r=e.book,s=(0,t.useState)("Diary"),a=(0,B.Z)(s,2),i=a[0],n=a[1];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:I.navigationLinks,children:[(0,v.jsx)("button",{onClick:function(){return n("Diary")},className:"".concat(I.navLink," ").concat("Diary"===i&&I.active),children:"Diary"}),(0,v.jsx)("button",{onClick:function(){return n("Statistics")},className:"".concat(I.navLink," ").concat("Statistics"===i&&I.active),children:"Statistics"})]}),"Diary"===i&&(0,v.jsx)(W,{book:r}),"Statistics"===i&&(0,v.jsx)(z,{})]})},J=function(){var e,r=null===(e=(0,n.TH)().state)||void 0===e?void 0:e.bookId,s=(0,i.v9)(c);console.log("book: ",s);var l=(0,i.v9)(d),g=(0,i.I0)();return(0,t.useEffect)((function(){g((0,o.OY)(r))}),[g,r]),r?(0,v.jsxs)(v.Fragment,{children:[l&&(0,v.jsx)("p",{children:"Loading..."}),s&&(0,v.jsxs)("div",{className:a,children:[(0,v.jsxs)(u.Z,{children:[(0,v.jsx)(Z,{book:s}),"unread"===s.status?(0,v.jsx)(y,{}):(0,v.jsx)(G,{book:s})]}),(0,v.jsx)(f,{book:s})]})]}):(0,v.jsx)(n.Fg,{to:"/library"})}}}]);
//# sourceMappingURL=118.45427531.chunk.js.map